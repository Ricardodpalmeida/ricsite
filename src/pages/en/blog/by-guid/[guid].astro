---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog', ({ data }) => {
    return !data.draft && data.language === 'en';
  });

  return posts.map((post) => ({
    params: { guid: post.data.guid },
    props: { post },
  }));
}

const { post } = Astro.props;
---

<meta http-equiv="refresh" content={`0;url=/en/blog/${post.data.guid}/`} />
<script>
  window.location.href = `/en/blog/${document.location.pathname.split('/').pop().replace('/', '')}/`;
</script> 